"use strict";(self["webpackChunkglyph_experiment_new"]=self["webpackChunkglyph_experiment_new"]||[]).push([[874],{8874:function(t,e,i){i.r(e),i.d(e,{default:function(){return Ut}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-page"},[e("el-tabs",{on:{"tab-click":t.tabClicks},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[e("el-tab-pane",{attrs:{name:"GlyphDesign"}},[e("span",{staticClass:"tab-item-title",attrs:{slot:"label"},slot:"label"},[t._v("可视化设计")]),e("VisualizationDesign")],1),e("el-tab-pane",{attrs:{name:"DistributionPractice"}},[e("span",{staticClass:"tab-item-title",attrs:{slot:"label"},slot:"label"},[t._v("实验一(实验练习)")]),e("ExperimentB",{attrs:{"experiment-settings":t.distributionPractice}})],1),e("el-tab-pane",{attrs:{name:"Distribution"}},[e("span",{staticClass:"tab-item-title",attrs:{slot:"label"},slot:"label"},[t._v("实验一(正式实验)")]),e("ExperimentB",{attrs:{"experiment-settings":t.distribution}})],1),e("el-tab-pane",{attrs:{name:"SmallDifferPractice"}},[e("span",{staticClass:"tab-item-title",attrs:{slot:"label"},slot:"label"},[t._v("实验二(实验练习)")]),e("ExperimentB",{attrs:{"experiment-settings":t.smallDifferPractice}})],1),e("el-tab-pane",{attrs:{name:"SmallDiffer"}},[e("span",{staticClass:"tab-item-title",attrs:{slot:"label"},slot:"label"},[t._v("实验二(正式实验)")]),e("ExperimentB",{attrs:{"experiment-settings":t.smallDiffer}})],1),e("el-tab-pane",{attrs:{name:"AccuracyDifferPractice"}},[e("span",{staticClass:"tab-item-title",attrs:{slot:"label"},slot:"label"},[t._v("实验三(实验练习)")]),e("ExperimentB",{attrs:{"experiment-settings":t.accuracyDifferPractice}})],1),e("el-tab-pane",{attrs:{name:"AccuracyDiffer"}},[e("span",{staticClass:"tab-item-title",attrs:{slot:"label"},slot:"label"},[t._v("实验三(正式实验)")]),e("ExperimentB",{attrs:{"experiment-settings":t.accuracyDiffer}})],1)],1)],1)},n=[],r=function(){var t=this,e=t._self._c;return e("div",[e("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[e("el-col",{attrs:{span:19}},[e("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[1===t.curShowGlyph?[e("el-col",{attrs:{span:10,offset:1}},[e("pea-glyph",{attrs:{"glyph-condition":t.peaGlyphCondition,"glyph-data":t.glyphData[0],"experiment-info":t.experimentInfo}})],1),e("el-col",{attrs:{span:10,offset:1}},[e("pea-glyph",{attrs:{"glyph-condition":t.peaGlyphCondition,"glyph-data":t.glyphData[1],"experiment-info":t.experimentInfo}})],1)]:[e("el-col",{attrs:{span:10,offset:1}},[e("stripe-glyph",{attrs:{"glyph-condition":t.stripeGlyphCondition,"glyph-data":t.glyphData[0],"experiment-info":t.experimentInfo}})],1),e("el-col",{attrs:{span:10,offset:1}},[e("stripe-glyph",{attrs:{"glyph-condition":t.stripeGlyphCondition,"glyph-data":t.glyphData[1],"experiment-info":t.experimentInfo}})],1)]],2),e("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[e("el-col",{attrs:{span:10,offset:1,"data-id":"0"}},[e("h1",{staticClass:"glyph-name"},[t._v("A")])]),e("el-col",{attrs:{span:10,offset:1,"data-id":"1"}},[e("h1",{staticClass:"glyph-name"},[t._v("B")])])],1),e("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[e("el-col",{attrs:{span:3}},[e("el-statistic",[e("span",{staticClass:"static-title",attrs:{slot:"title"},slot:"title"},[t._v(" 已完成实验数 ")]),e("span",{staticClass:"experiment-num",attrs:{slot:"formatter"},slot:"formatter"},[t._v(" "+t._s(t.curActive)+" ")])])],1),e("el-col",{attrs:{span:3}},[e("el-statistic",[e("span",{staticClass:"static-title",attrs:{slot:"title"},slot:"title"},[t._v(" 实验总数 ")]),e("span",{staticClass:"experiment-num",attrs:{slot:"formatter"},slot:"formatter"},[t._v(" "+t._s(t.totalExperimentNum)+" ")])])],1)],1),e("el-row",{directives:[{name:"show",rawName:"v-show",value:t.experimentSettings.isDemo&&t.curActive===t.totalExperimentNum,expression:"experimentSettings.isDemo && curActive===totalExperimentNum"}],attrs:{type:"flex",justify:"center",align:"middle"}},[e("el-col",{staticStyle:{"text-align":"center","margin-top":"1vh"},attrs:{span:24}},[e("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-refresh-left"},on:{click:t.practiceAgain}},[t._v("重新练习")])],1)],1)],1),e("el-col",{staticClass:"des-outline",attrs:{span:5}},[e("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[e("el-col",{attrs:{span:24}},[e("h2",{staticClass:"show-center"},[t._v("图例")])])],1),e("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[e("el-col",{attrs:{span:24}},[e("color-legend",{attrs:{experiment:1}})],1)],1),e("div",{staticClass:"divider"}),e("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[e("el-col",{attrs:{span:24}},[e("h2",{staticClass:"show-center"},[t._v("可视化解释")])])],1),e("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[e("el-col",{attrs:{span:24}},[e("VisualizationDescription",{attrs:{"vis-description":t.visDes}})],1)],1),e("div",{staticClass:"divider"}),e("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[e("el-col",{attrs:{span:24}},[e("h2",{staticClass:"show-center"},[t._v("实验任务")])])],1),e("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[e("el-col",{attrs:{span:24}},[e("experiment-b-task",{attrs:{"experiment-info":t.experimentInfo}},[3!==t.experimentSettings.experimentId?e("p",{attrs:{slot:"task"},slot:"task"},[t._v("请从左侧两个可视化图形中选择"),e("span",{directives:[{name:"show",rawName:"v-show",value:1===t.experimentSettings.experimentId,expression:"experimentSettings.experimentId===1"}],staticStyle:{color:"red"}},[t._v("数据分布比较均匀的一个【方差最小】")]),e("span",{directives:[{name:"show",rawName:"v-show",value:2===t.experimentSettings.experimentId,expression:"experimentSettings.experimentId===2"}],staticStyle:{color:"red"}},[t._v("具有较大【"+t._s(t.curFindAttr.nameCh)+"】的图形")])]):e("p",{attrs:{slot:"task"},slot:"task"},[t._v(" 请估算左侧两个可视化图形中"),e("span",{staticStyle:{color:"red"}},[t._v(t._s(t.curFindAttr.nameCh))]),t._v("的差值 ")]),3!==t.experimentSettings.experimentId?e("p",{staticClass:"task-explanation",attrs:{slot:"explanation"},slot:"explanation"},[t._v(" 说明：请在下方"),e("strong",[t._v("【单击】")]),t._v("选择图形"),e("strong",[t._v("【A/B】")]),t._v("后点击"),e("strong",[t._v("【保存结果】")]),t._v("按钮进行保存，保存成功后即可点击"),e("span",{directives:[{name:"show",rawName:"v-show",value:t.totalExperimentNum!==t.curActive,expression:"totalExperimentNum!==curActive"}]},[e("strong",[t._v("【下一步】")]),t._v("按钮进行下一个实验")]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.totalExperimentNum===t.curActive,expression:"totalExperimentNum===curActive"}]},[e("strong",[t._v("【提交结果】")]),t._v("按钮导出实验结果")])]):e("p",{staticClass:"task-explanation",attrs:{slot:"explanation"},slot:"explanation"},[t._v(" 说明：请在下方"),e("strong",[t._v("【输入】")]),t._v("您估算的结果"),e("strong",[t._v("(小数点后两位)")]),t._v("后点击"),e("strong",[t._v("【保存结果】")]),t._v("按钮进行保存，保存成功后即可点击"),e("span",{directives:[{name:"show",rawName:"v-show",value:t.totalExperimentNum!==t.curActive,expression:"totalExperimentNum!==curActive"}]},[e("strong",[t._v("【下一步】")]),t._v("按钮进行下一个实验")]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.totalExperimentNum===t.curActive,expression:"totalExperimentNum===curActive"}]},[e("strong",[t._v("【提交结果】")]),t._v("按钮导出实验结果")])])])],1)],1)],1)],1)],1)},a=[],l=(i(7658),function(){var t=this,e=t._self._c;return e("div",{attrs:{id:t.svgId}})}),o=[],h=i(8847),p=i(691),c=i(379),m={name:"peaGlyph",mixins:[h.YG],props:["glyphCondition","glyphData","experimentInfo"],data(){return{svgId:"",glyphSvg:"",showGlyph:""}},created(){this.svgId=`peaGlyph_${(0,p.x0)()}`},methods:{createGlyph(){this.showGlyph&&(this.showGlyph.remove(),this.showGlyph=""),this.peaGlyphCondition={...this.peaGlyphCondition,...this.glyphCondition},this.glyphSvg.attr("width",this.peaGlyphCondition.glyphSize).attr("height",this.peaGlyphCondition.glyphSize),this.showGlyph=this.drawPeaGlyph(this.glyphSvg,this.peaGlyphCondition,this.glyphData,{isExperimentB:this.experimentInfo.isExperimentB},this.encodingColor,{})}},mounted(){const t=this;this.glyphSvg=c.Ys(`#${t.svgId}`).append("svg").attr("width",t.peaGlyphCondition.glyphSize).attr("height",t.peaGlyphCondition.glyphSize),this.createGlyph()},watch:{experimentInfo:{deep:!0,handler(t,e){this.createGlyph()}}}},u=m,d=i(1001),f=(0,d.Z)(u,l,o,!1,null,"58e1236a",null),x=f.exports,g=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:t.svgId}})},y=[],v={name:"stripeGlyph",mixins:[h.YG],props:["glyphCondition","glyphData","experimentInfo"],data(){return{svgId:"",glyphSvg:"",showGlyph:""}},created(){this.svgId=`stripeGlyph_${(0,p.x0)()}`},methods:{createGlyph(){this.showGlyph&&(this.showGlyph.remove(),this.showGlyph=""),this.stripeGlyphCondition={...this.stripeGlyphCondition,...this.glyphCondition},this.glyphSvg.attr("width",this.stripeGlyphCondition.glyphSize).attr("height",this.stripeGlyphCondition.glyphSize),this.showGlyph=this.drawStripGlyph(this.glyphSvg,this.stripeGlyphCondition,this.glyphData,{isExperimentB:this.experimentInfo.isExperimentB},this.encodingColor,{})}},mounted(){const t=this;this.glyphSvg=c.Ys(`#${t.svgId}`).append("svg").attr("width",t.stripeGlyphCondition.glyphSize).attr("height",t.stripeGlyphCondition.glyphSize),this.createGlyph()},watch:{experimentInfo:{deep:!0,handler(t,e){this.createGlyph()}}}},_=v,D=(0,d.Z)(_,g,y,!1,null,"192b0e8c",null),S=D.exports,$=function(){var t=this,e=t._self._c;return e("div",[e("el-row",{staticClass:"task-des",attrs:{type:"flex",justify:"center",align:"middle"}},[e("el-col",{attrs:{span:23,offset:1}},[t._t("task")],2)],1),e("el-row",{staticClass:"task-des",attrs:{type:"flex",justify:"center",align:"middle"}},[e("el-col",{attrs:{span:23,offset:1}},[t._t("explanation")],2)],1),3!==this.experimentInfo.experimentId?e("el-row",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"flex",justify:"center",align:"middle"}},[e("el-col",{staticClass:"radio-label",attrs:{span:5,offset:1}},[e("span",[t._v("图形：")])]),e("el-col",{attrs:{span:16,offset:2}},[e("el-radio-group",{model:{value:t.glyphIndex,callback:function(e){t.glyphIndex=e},expression:"glyphIndex"}},[e("el-radio-button",{attrs:{label:"0"}},[e("span",{staticClass:"glyph-label"},[t._v("A")])]),e("el-radio-button",{attrs:{label:"1"}},[e("span",{staticClass:"glyph-label"},[t._v("B")])])],1)],1)],1):t._e(),3===this.experimentInfo.experimentId?e("el-row",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"flex",justify:"start",align:"middle"}},[e("el-col",{staticClass:"radio-label",attrs:{span:5,offset:1}},[e("span",[t._v("差值：")])]),e("el-col",{attrs:{span:7}},[e("el-input-number",{attrs:{min:0,max:10,step:.01},model:{value:t.glyphIndex,callback:function(e){t.glyphIndex=e},expression:"glyphIndex"}})],1)],1):t._e(),e("el-row",{staticStyle:{"margin-bottom":"1vh"},attrs:{type:"flex",justify:"center",align:"middle"}},[e("el-col",{staticClass:"text-center",attrs:{span:5,offset:3}},[e("el-button",{attrs:{type:"primary"},on:{click:t.saveResult}},[t._v("保存结果")])],1),e("el-col",{staticClass:"text-center",attrs:{span:12}},[e("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.isShowSubmitBtn,expression:"!isShowSubmitBtn"}],attrs:{type:"success",disabled:!t.isSaveResult},on:{click:t.nextStep}},[t._v("下一步"),e("i",{staticClass:"el-icon-arrow-right el-icon--right"})]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isShowSubmitBtn,expression:"isShowSubmitBtn"}],attrs:{type:"danger",disabled:!t.isSaveResult},on:{click:t.submitResult}},[t._v("提交结果 ")])],1)],1)],1)},I=[],w={name:"experimentBTask",props:["experimentInfo"],data(){return{glyphIndex:"",isSaveResult:!1}},mixins:[h.jP],methods:{nextStep(){this.$bus.$emit("nextExperiment",{isDemo:this.experimentInfo.isDemo,experimentId:this.experimentInfo.experimentId})},saveResult(){if(""===this.glyphIndex){let t="您还未选择可视化图形!";3===this.experimentInfo.experimentId&&(t="您还未输入估算结果!"),this.$message({type:"error",message:t,duration:1500})}else this.$confirm("确定保存您的选择结果吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.experimentInfo.isDemo||this.$bus.$emit("saveChooseResult",{isDemo:this.experimentInfo.isDemo,experimentId:this.experimentInfo.experimentId,glyphIndex:Number(this.glyphIndex),time:this.getCurrentTime()}),this.isSaveResult=!0,this.$message({type:"success",message:"保存成功!",duration:1500})})).catch((()=>{console.log("已取消保存")}))},submitResult(){this.$bus.$emit("exportResult",{isDemo:this.experimentInfo.isDemo,experimentId:this.experimentInfo.experimentId})}},computed:{isShowSubmitBtn(){return this.experimentInfo.curActive===this.experimentInfo.total}},watch:{"experimentInfo.curActive":{immediate:!0,handler(t){this.isSaveResult=!1,this.glyphIndex=""}}}},C=w,b=(0,d.Z)(C,$,I,!1,null,"ce3ae15e",null),G=b.exports,N=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{margin:"1vh 0 .5vh 0"}},[1===t.visDescription.glyphType?[e("el-row",[e("el-col",{attrs:{span:23,offset:1}},[t._v(" 圆圈填充的颜色表示"),e("span",{staticClass:"under_line"},[t._v("数据的类别")])])],1),e("el-row",[e("el-col",{attrs:{span:23,offset:1}},[t._v(" 每个圆圈表示的值的大小为"),e("span",{staticClass:"under_line"},[t._v(t._s(t.visDescription.circleValue.toFixed(2)))])])],1),e("el-row",[e("el-col",{attrs:{span:23,offset:1}},[t._v(" 每类数据最多可以通过"),e("span",{staticClass:"under_line"},[t._v(t._s(t.visDescription.maxCircle))]),t._v("个圆圈表示 ")])],1),e("el-row",[e("el-col",{attrs:{span:23,offset:1}},[t._v(" 每类数据表达的值的范围是"),e("span",{staticClass:"under_line"},[t._v("[0,"+t._s(t.visDescription.circleValue*t.visDescription.maxCircle)+"]")])])],1)]:[e("el-row",[e("el-col",{attrs:{span:23,offset:1}},[t._v(" 条纹段填充的颜色表达了"),e("span",{staticClass:"under_line"},[t._v("数据的类别")])])],1),e("el-row",[e("el-col",{attrs:{span:23,offset:1}},[t._v(" 每个条纹段表示的值为"),e("span",{staticClass:"under_line"},[t._v(t._s(t.visDescription.circleValue.toFixed(2)))])])],1),e("el-row",[e("el-col",{attrs:{span:23,offset:1}},[t._v(" 每类数据最多可以通过"),e("span",{staticClass:"under_line"},[t._v(t._s(t.visDescription.maxCircle))]),t._v("个条纹段编码 ")])],1),e("el-row",[e("el-col",{attrs:{span:23,offset:1}},[t._v(" 每类数据表达的值的范围是"),e("span",{staticClass:"under_line"},[t._v("[0,"+t._s(t.visDescription.circleValue*t.visDescription.maxCircle)+"]")])])],1),e("el-row",[e("el-col",{staticClass:"text",attrs:{span:23,offset:1}},[t._v(" 每个扇形区域的"),e("span",{staticClass:"under_line"},[t._v("灰色半透明条纹段和彩色条纹段的数量之和")]),t._v("表达了该扇形区域所能编码条纹段的最大值 ")])],1)]],2)},M=[],A={name:"VisualizationDescription",props:["visDescription"]},T=A,E=(0,d.Z)(T,N,M,!1,null,"9cb40fa2",null),k=E.exports,B=function(){var t=this,e=t._self._c;return e("div",t._l(t.colorLegend,(function(t){return e("div",{key:t.id,staticClass:"legend-item"},[e("color-item",{attrs:{"color-name":t}})],1)})),0)},Y=[],z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"legend"},[e("div",{staticClass:"legend-icon"},[e("svg",{attrs:{width:t.svgSize,height:t.svgSize}},[e("circle",{attrs:{r:t.svgSize/2-t.outlineThickness/2,cx:t.svgSize/2,cy:t.svgSize/2,fill:t.colorName.color,stroke:"#000000","stroke-width":t.outlineThickness}})])]),e("div",{staticClass:"legend-des"},[t._v(" "+t._s(t.colorName.nameCh)+" ")])])},R=[],L={name:"ColorItem",data(){return{svgSize:20,outlineThickness:1}},computed:{circleInfo(){return{width:`${this.svgSize}vh`,height:`${this.svgSize}vh`,r:(this.svgSize-this.outlineThickness)/2+"vh",cx:this.svgSize/2+"vh",cy:this.svgSize/2+"vh",strokeWidth:`${this.outlineThickness}vh`}}},props:["colorName"]},V=L,O=(0,d.Z)(V,z,R,!1,null,"77aad95c",null),F=O.exports,j={name:"ColorLegend",components:{ColorItem:F},props:["experiment"],computed:{colorLegend(){return this.experiment,this.$store.state.ssiColorEncoding}}},P=j,H=(0,d.Z)(P,B,Y,!1,null,"5e0d682d",null),Z=H.exports,W=60,J=60*W,U=24*J,q=7*U,Q=1e3,K=W*Q,X=J*Q,tt=U*Q,et=q*Q,it="millisecond",st="second",nt="minute",rt="hour",at="day",lt="week",ot="month",ht="quarter",pt="year",ct="date",mt="YYYY-MM-DDTHH:mm:ssZ",ut="Invalid Date",dt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ft=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,xt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],i=t%100;return"["+t+(e[(i-20)%10]||e[i]||e[0])+"]"}},gt=function(t,e,i){var s=String(t);return!s||s.length>=e?t:""+Array(e+1-s.length).join(i)+t},yt=function(t){var e=-t.utcOffset(),i=Math.abs(e),s=Math.floor(i/60),n=i%60;return(e<=0?"+":"-")+gt(s,2,"0")+":"+gt(n,2,"0")},vt=function t(e,i){if(e.date()<i.date())return-t(i,e);var s=12*(i.year()-e.year())+(i.month()-e.month()),n=e.clone().add(s,ot),r=i-n<0,a=e.clone().add(s+(r?-1:1),ot);return+(-(s+(i-n)/(r?n-a:a-n))||0)},_t=function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},Dt=function(t){var e={M:ot,y:pt,w:lt,d:at,D:ct,h:rt,m:nt,s:st,ms:it,Q:ht};return e[t]||String(t||"").toLowerCase().replace(/s$/,"")},St=function(t){return void 0===t},$t={s:gt,z:yt,m:vt,a:_t,p:Dt,u:St},It="en",wt={};wt[It]=xt;var Ct=function(t){return t instanceof Tt},bt=function t(e,i,s){var n;if(!e)return It;if("string"===typeof e){var r=e.toLowerCase();wt[r]&&(n=r),i&&(wt[r]=i,n=r);var a=e.split("-");if(!n&&a.length>1)return t(a[0])}else{var l=e.name;wt[l]=e,n=l}return!s&&n&&(It=n),n||!s&&It},Gt=function(t,e){if(Ct(t))return t.clone();var i="object"===typeof e?e:{};return i.date=t,i.args=arguments,new Tt(i)},Nt=function(t,e){return Gt(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})},Mt=$t;Mt.l=bt,Mt.i=Ct,Mt.w=Nt;var At=function(t){var e=t.date,i=t.utc;if(null===e)return new Date(NaN);if(Mt.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"===typeof e&&!/Z$/i.test(e)){var s=e.match(dt);if(s){var n=s[2]-1||0,r=(s[7]||"0").substring(0,3);return i?new Date(Date.UTC(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)):new Date(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)}}return new Date(e)},Tt=function(){function t(t){this.$L=bt(t.locale,null,!0),this.parse(t)}var e=t.prototype;return e.parse=function(t){this.$d=At(t),this.$x=t.x||{},this.init()},e.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},e.$utils=function(){return Mt},e.isValid=function(){return!(this.$d.toString()===ut)},e.isSame=function(t,e){var i=Gt(t);return this.startOf(e)<=i&&i<=this.endOf(e)},e.isAfter=function(t,e){return Gt(t)<this.startOf(e)},e.isBefore=function(t,e){return this.endOf(e)<Gt(t)},e.$g=function(t,e,i){return Mt.u(t)?this[e]:this.set(i,t)},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this.$d.getTime()},e.startOf=function(t,e){var i=this,s=!!Mt.u(e)||e,n=Mt.p(t),r=function(t,e){var n=Mt.w(i.$u?Date.UTC(i.$y,e,t):new Date(i.$y,e,t),i);return s?n:n.endOf(at)},a=function(t,e){var n=[0,0,0,0],r=[23,59,59,999];return Mt.w(i.toDate()[t].apply(i.toDate("s"),(s?n:r).slice(e)),i)},l=this.$W,o=this.$M,h=this.$D,p="set"+(this.$u?"UTC":"");switch(n){case pt:return s?r(1,0):r(31,11);case ot:return s?r(1,o):r(0,o+1);case lt:var c=this.$locale().weekStart||0,m=(l<c?l+7:l)-c;return r(s?h-m:h+(6-m),o);case at:case ct:return a(p+"Hours",0);case rt:return a(p+"Minutes",1);case nt:return a(p+"Seconds",2);case st:return a(p+"Milliseconds",3);default:return this.clone()}},e.endOf=function(t){return this.startOf(t,!1)},e.$set=function(t,e){var i,s=Mt.p(t),n="set"+(this.$u?"UTC":""),r=(i={},i[at]=n+"Date",i[ct]=n+"Date",i[ot]=n+"Month",i[pt]=n+"FullYear",i[rt]=n+"Hours",i[nt]=n+"Minutes",i[st]=n+"Seconds",i[it]=n+"Milliseconds",i)[s],a=s===at?this.$D+(e-this.$W):e;if(s===ot||s===pt){var l=this.clone().set(ct,1);l.$d[r](a),l.init(),this.$d=l.set(ct,Math.min(this.$D,l.daysInMonth())).$d}else r&&this.$d[r](a);return this.init(),this},e.set=function(t,e){return this.clone().$set(t,e)},e.get=function(t){return this[Mt.p(t)]()},e.add=function(t,e){var i,s=this;t=Number(t);var n=Mt.p(e),r=function(e){var i=Gt(s);return Mt.w(i.date(i.date()+Math.round(e*t)),s)};if(n===ot)return this.set(ot,this.$M+t);if(n===pt)return this.set(pt,this.$y+t);if(n===at)return r(1);if(n===lt)return r(7);var a=(i={},i[nt]=K,i[rt]=X,i[st]=Q,i)[n]||1,l=this.$d.getTime()+t*a;return Mt.w(l,this)},e.subtract=function(t,e){return this.add(-1*t,e)},e.format=function(t){var e=this,i=this.$locale();if(!this.isValid())return i.invalidDate||ut;var s=t||mt,n=Mt.z(this),r=this.$H,a=this.$m,l=this.$M,o=i.weekdays,h=i.months,p=i.meridiem,c=function(t,i,n,r){return t&&(t[i]||t(e,s))||n[i].slice(0,r)},m=function(t){return Mt.s(r%12||12,t,"0")},u=p||function(t,e,i){var s=t<12?"AM":"PM";return i?s.toLowerCase():s},d={YY:String(this.$y).slice(-2),YYYY:this.$y,M:l+1,MM:Mt.s(l+1,2,"0"),MMM:c(i.monthsShort,l,h,3),MMMM:c(h,l),D:this.$D,DD:Mt.s(this.$D,2,"0"),d:String(this.$W),dd:c(i.weekdaysMin,this.$W,o,2),ddd:c(i.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(r),HH:Mt.s(r,2,"0"),h:m(1),hh:m(2),a:u(r,a,!0),A:u(r,a,!1),m:String(a),mm:Mt.s(a,2,"0"),s:String(this.$s),ss:Mt.s(this.$s,2,"0"),SSS:Mt.s(this.$ms,3,"0"),Z:n};return s.replace(ft,(function(t,e){return e||d[t]||n.replace(":","")}))},e.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},e.diff=function(t,e,i){var s,n=Mt.p(e),r=Gt(t),a=(r.utcOffset()-this.utcOffset())*K,l=this-r,o=Mt.m(this,r);return o=(s={},s[pt]=o/12,s[ot]=o,s[ht]=o/3,s[lt]=(l-a)/et,s[at]=(l-a)/tt,s[rt]=l/X,s[nt]=l/K,s[st]=l/Q,s)[n]||l,i?o:Mt.a(o)},e.daysInMonth=function(){return this.endOf(ot).$D},e.$locale=function(){return wt[this.$L]},e.locale=function(t,e){if(!t)return this.$L;var i=this.clone(),s=bt(t,e,!0);return s&&(i.$L=s),i},e.clone=function(){return Mt.w(this.$d,this)},e.toDate=function(){return new Date(this.valueOf())},e.toJSON=function(){return this.isValid()?this.toISOString():null},e.toISOString=function(){return this.$d.toISOString()},e.toString=function(){return this.$d.toUTCString()},t}(),Et=Tt.prototype;Gt.prototype=Et,[["$ms",it],["$s",st],["$m",nt],["$H",rt],["$W",at],["$M",ot],["$y",pt],["$D",ct]].forEach((function(t){Et[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),Gt.extend=function(t,e){return t.$i||(t(e,Tt,Gt),t.$i=!0),Gt},Gt.locale=bt,Gt.isDayjs=Ct,Gt.unix=function(t){return Gt(1e3*t)},Gt.en=wt[It],Gt.Ls=wt,Gt.p={};var kt=Gt,Bt={name:"lo",weekdays:"ອາທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),months:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),weekdaysShort:"ທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),monthsShort:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),weekdaysMin:"ທ_ຈ_ອຄ_ພ_ພຫ_ສກ_ສ".split("_"),ordinal:function(t){return t},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"ວັນdddd D MMMM YYYY HH:mm"},relativeTime:{future:"ອີກ %s",past:"%sຜ່ານມາ",s:"ບໍ່ເທົ່າໃດວິນາທີ",m:"1 ນາທີ",mm:"%d ນາທີ",h:"1 ຊົ່ວໂມງ",hh:"%d ຊົ່ວໂມງ",d:"1 ມື້",dd:"%d ມື້",M:"1 ເດືອນ",MM:"%d ເດືອນ",y:"1 ປີ",yy:"%d ປີ"}};kt.locale(Bt,null,!0);var Yt={name:"ExperimentB",components:{peaGlyph:x,stripeGlyph:S,experimentBTask:G,VisualizationDescription:k,ColorLegend:Z},props:["experimentSettings"],mixins:[h.jP],data(){return{curActive:1,curShowGlyph:1,maxValue:10,peaGlyphCondition:{glyphSize:650,circleNum:10,centerOffset:12,circleValue:1},stripeGlyphCondition:{glyphSize:650,stripe_L_R:.1,stripe_B_A:.02,stripeProportion:.072,layerNum:10,stripeNum:40,stripeValue:.25},glyphType:[1,2],circleNum:[10,20,40],allGlyphData:{},conditionFinish:{},glyphData:[],curCondition:10,allRandomAttrs:{},curFindAttr:{},curExperimentInfo:{glyphType:1,stripeNum:0,stripeValue:0,startTime:"",submitTime:"",endTime:"",chooseIndex:0,chooseData:{},allData:[],findAttr:"",isRight:!1},experimentResultInfo:{startTime:"",endTime:"",childExperiment:[]}}},methods:{initialGlyphData(){let t={};const e=["ExperimentB_Demo","ExperimentB_10","ExperimentB_20","ExperimentB_40"];t=1===this.experimentSettings.experimentId?this.experimentSettings.isDemo?this.$store.state.DistributionPractice:this.$store.state.Distribution:2===this.experimentSettings.experimentId?this.experimentSettings.isDemo?this.$store.state.SmallDifferPractice:this.$store.state.SmallDiffer:this.experimentSettings.isDemo?this.$store.state.AccuracyDifferPractice:this.$store.state.AccuracyDiffer,this.experimentSettings.isDemo?this.allGlyphData={demo:[...t[e[0]]],num_10:[...t[e[1]]],num_20:[...t[e[2]]],num_40:[...t[e[3]]]}:this.experimentSettings.experimentNum<t[e[0]].length?this.allGlyphData={demo:[...t[e[0]].slice(0,this.experimentSettings.experimentNum)],num_10:[...t[e[1]].slice(0,this.experimentSettings.experimentNum)],num_20:[...t[e[2]].slice(0,this.experimentSettings.experimentNum)],num_40:[...t[e[3]].slice(0,this.experimentSettings.experimentNum)]}:this.experimentSettings.experimentNum===t[e[0]].length?this.allGlyphData={demo:[...t[e[0]]],num_10:[...t[e[1]]],num_20:[...t[e[2]]],num_40:[...t[e[3]]]}:console.log("数据量不够，需要变小实验数量"),this.conditionFinish={demo:0,num_10:0,num_20:0,num_40:0}},randomChooseData(){let t=this.randomIndex(this.circleNum.length),e=this.circleNum[t],i=this.conditionFinish[`num_${e}`];while(i>=this.experimentSettings.experimentNum)t=this.randomIndex(this.circleNum.length),e=this.circleNum[t],i=this.conditionFinish[`num_${e}`];this.$set(this.conditionFinish,`num_${e}`,++i),this.curCondition=e,this.$set(this.curExperimentInfo,"stripeNum",this.curCondition);const s=this.allGlyphData[`num_${e}`];if(s.length){const t=this.randomIndex(s.length);this.glyphData=s[t],this.$set(this.curExperimentInfo,"allData",this.glyphData),2===this.experimentSettings.experimentId?(this.curFindAttr=this.findAttrs(this.curCondition,this.glyphData[0].originIndex),this.$set(this.curExperimentInfo,"findAttr",this.curFindAttr.name)):3===this.experimentSettings.experimentId&&(this.curFindAttr=this.findAttrs(this.curCondition,this.glyphData[0].index),this.$set(this.curExperimentInfo,"findAttr",this.curFindAttr.name)),s.splice(t,1)}else console.log("数据不够用了")},changeGlyphLayout(t,e){if(1===t){const t=e,i=this.maxValue/e;let s=3;switch(e){case 10:s=12;break;case 20:s=6;break;case 40:s=3;break}this.peaGlyphCondition={...this.peaGlyphCondition,circleNum:t,circleValue:i,centerOffset:s}}else{const t=e,i=this.maxValue/e;let s=6,n=.083,r=.07,a=.15;switch(e){case 10:s=4,n=.117,r=.07,a=.1;break;case 20:s=6,n=.083,r=.07,a=.15;break;case 40:s=10,n=.072,r=.02,a=.1;break}this.stripeGlyphCondition={...this.stripeGlyphCondition,stripeNum:t,stripeValue:i,layerNum:s,stripeProportion:n,stripe_B_A:r,stripe_L_R:a}}},initialFindAttr(){const t=this.$store.state.ssiColorEncoding;if(2===this.experimentSettings.experimentId&&this.allGlyphData)for(const e in this.allGlyphData){let i=[];for(const s of this.allGlyphData[e]){const e=Math.floor(Math.random()*t.length);i.push({...t[e],id:s[0].originIndex})}this.$set(this.allRandomAttrs,e,i)}else if(3===this.experimentSettings.experimentId&&this.allGlyphData)for(const e in this.allGlyphData){let i=[],s=.5;for(const n of this.allGlyphData[e]){let e=Math.floor(Math.random()*t.length),r=this.getDataAttrNum(n[0],t[e].name),a=this.getDataAttrNum(n[1],t[e].name),l=Math.abs(a-r);while(l<s)e=Math.floor(Math.random()*t.length),r=this.getDataAttrNum(n[0],t[e].name),a=this.getDataAttrNum(n[1],t[e].name),l=Math.abs(a-r);i.push({...t[e],differs:l,id:n[0].index})}this.$set(this.allRandomAttrs,e,i)}},findAttrs(t,e){const i=`num_${t}`,s=this.allRandomAttrs[i];for(const n of s)if(e===n.id)return n;return""},practiceAgain(){this.experimentSettings.isDemo&&(this.curActive=1)},distributionIsRight(t,e){const i=t[0].var>t[1].var?1:0;return Number(e)===i},smallDifferIsRight(t,e,i){const s=t[0].data.filter((t=>t.name===i.name))[0].value,n=t[1].data.filter((t=>t.name===i.name))[0].value,r=s>n?0:1;return r===Number(e)}},mounted(){this.$bus.$on("saveStartTime",(t=>{const{passInfo:e}=t;e.isDemo===this.experimentSettings.isDemo&&e.experimentId===this.experimentSettings.experimentId&&(this.$set(this.experimentResultInfo,"startTime",this.getCurrentTime()),this.$set(this.curExperimentInfo,"startTime",this.getCurrentTime()))})),this.$bus.$on("nextExperiment",(t=>{t.isDemo===this.experimentSettings.isDemo&&t.experimentId===this.experimentSettings.experimentId&&this.curActive<this.totalExperimentNum&&(this.curActive++,this.$set(this.curExperimentInfo,"endTime",this.getCurrentTime()),this.experimentResultInfo.childExperiment.push({...this.curExperimentInfo}))})),this.$bus.$on("saveChooseResult",(t=>{if(t.isDemo===this.experimentSettings.isDemo&&t.experimentId===this.experimentSettings.experimentId){let e=!1;e=1===t.experimentId?this.distributionIsRight(this.glyphData,t.glyphIndex):2===t.experimentId?this.smallDifferIsRight(this.glyphData,t.glyphIndex,this.curFindAttr):Number(t.glyphIndex)-this.curFindAttr.differs,this.curExperimentInfo={...this.curExperimentInfo,submitTime:t.time,chooseIndex:t.glyphIndex,chooseData:3===this.experimentSettings.experimentId?this.curFindAttr.differs:this.glyphData[Number(t.glyphIndex)],isRight:e,stripeValue:this.maxValue/this.curCondition}}})),this.$bus.$on("exportResult",(t=>{if(t.isDemo===this.experimentSettings.isDemo&&t.experimentId===this.experimentSettings.experimentId&&!this.experimentSettings.isDemo){const t=this.getCurrentTime();this.$set(this.curExperimentInfo,"endTime",t),this.experimentResultInfo.childExperiment.push({...this.curExperimentInfo}),this.$set(this.experimentResultInfo,"endTime",t),this.saveAsJson(this.experimentResultInfo,this.experimentSettings.experimentId,(()=>{this.$message({message:"感谢您的参与，数据已保存成功!",type:"success",duration:1500})}))}}))},computed:{totalExperimentNum(){return this.glyphType.length*this.circleNum.length*this.experimentSettings.experimentNum},experimentInfo(){return{isExperimentB:!0,isDemo:this.experimentSettings.isDemo,experimentId:this.experimentSettings.experimentId,curActive:this.curActive,total:this.totalExperimentNum}},visDes(){let t=0,e=10;return 1===this.curShowGlyph?(t=this.peaGlyphCondition.circleValue,e=this.peaGlyphCondition.circleNum):(t=this.stripeGlyphCondition.stripeValue,e=this.stripeGlyphCondition.stripeNum),{circleValue:t,maxCircle:e,glyphType:this.curShowGlyph}}},watch:{curActive:{immediate:!0,handler(t,e){1===t?(this.curShowGlyph=Math.random()>.5?1:2,this.initialGlyphData(),this.initialFindAttr()):t===this.totalExperimentNum/2+1&&(this.initialGlyphData(),this.$notify({title:"提示",message:(1===this.curShowGlyph?"PeaGlyph":"StripeGlyph")+"相关实验已全部完成！",type:"success",duration:3e3}),this.curShowGlyph=3-this.curShowGlyph),1!==t&&this.$set(this.curExperimentInfo,"startTime",this.getCurrentTime()),this.$set(this.curExperimentInfo,"glyphType",this.curShowGlyph),this.randomChooseData(),this.changeGlyphLayout(this.curShowGlyph,this.curCondition)}}}},zt=Yt,Rt=(0,d.Z)(zt,r,a,!1,null,"169ccd80",null),Lt=Rt.exports,Vt=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"margin-top":"5vh"}},[e("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[e("el-col",{attrs:{span:11,offset:1}},[e("pea-glyph",{attrs:{"glyph-condition":t.peaGlyphCondition,"glyph-data":t.glyphData,"experiment-info":t.experimentInfo}})],1),e("el-col",{attrs:{span:12}},[e("stripe-glyph",{attrs:{"glyph-condition":t.stripeGlyphCondition,"glyph-data":t.glyphData,"experiment-info":t.experimentInfo}})],1)],1)],1)},Ot=[],Ft={name:"VisualizationDesign",components:{peaGlyph:x,stripeGlyph:S},data(){return{peaGlyphCondition:{glyphSize:750,circleNum:10,centerOffset:15,circleValue:1},stripeGlyphCondition:{glyphSize:750,stripe_L_R:.07,stripe_B_A:.1,stripeProportion:.117,layerNum:4,stripeNum:10,stripeValue:1},glyphData:[],experimentInfo:{isExperimentB:!0}}},created(){this.glyphData=this.$store.state.GlyphDesignData}},jt=Ft,Pt=(0,d.Z)(jt,Vt,Ot,!1,null,"3c5d7358",null),Ht=Pt.exports,Zt={name:"mainPage",data(){return{activeTab:"AccuracyDifferPractice",distributionPractice:{isDemo:!0,experimentId:1,experimentNum:1},distribution:{isDemo:!1,experimentId:1,experimentNum:10},smallDifferPractice:{isDemo:!0,experimentId:2,experimentNum:1},smallDiffer:{isDemo:!1,experimentId:2,experimentNum:10},accuracyDifferPractice:{isDemo:!0,experimentId:3,experimentNum:1},accuracyDiffer:{isDemo:!1,experimentId:3,experimentNum:10}}},components:{ExperimentB:Lt,VisualizationDesign:Ht},methods:{tabClicks(t){const e=t.name;"Distribution"===e?this.$bus.$emit("saveStartTime",{passInfo:this.distribution}):"SmallDiffer"===e?this.$bus.$emit("saveStartTime",{passInfo:this.smallDiffer}):"AccuracyDiffer"===e&&this.$bus.$emit("saveStartTime",{passInfo:this.accuracyDiffer})}}},Wt=Zt,Jt=(0,d.Z)(Wt,s,n,!1,null,"766ba2de",null),Ut=Jt.exports}}]);
//# sourceMappingURL=874.38e067d5.js.map