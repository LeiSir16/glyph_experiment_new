(function(){"use strict";var t={8028:function(t,e,n){n.r(e),n.d(e,{default:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",[e("el-container",[e("el-header",[e("el-row",[e("el-col",{attrs:{span:24}},[e("h1",[t._v("欢迎参加本次实验")])])],1)],1),e("el-main",[e("el-row",[e("el-col",{attrs:{span:24}},[e("h4",{staticStyle:{color:"grey"}},[t._v("请允许我们收集您的一些个人信息")])])],1),e("el-row",{attrs:{type:"flex",justify:"left",align:"middle"}},[e("el-col",{attrs:{span:7,offset:8}},[e("el-form",{ref:"formUser",attrs:{"label-position":"right","label-width":"80px",model:t.userInfo}},[e("el-form-item",{attrs:{label:"实验编号"}},[e("el-input",{attrs:{readonly:""},model:{value:t.userInfo.sId,callback:function(e){t.$set(t.userInfo,"sId",e)},expression:"userInfo.sId"}})],1),e("el-form-item",{attrs:{label:"姓名",prop:"name"}},[e("el-input",{attrs:{placeholder:"请输入您的姓名",clearable:""},model:{value:t.userInfo.name,callback:function(e){t.$set(t.userInfo,"name",e)},expression:"userInfo.name"}})],1),e("el-form-item",{staticClass:"gender",attrs:{label:"性别"}},[e("el-radio-group",{model:{value:t.userInfo.gender,callback:function(e){t.$set(t.userInfo,"gender",e)},expression:"userInfo.gender"}},[e("el-radio",{attrs:{label:"男"}}),e("el-radio",{attrs:{label:"女"}})],1)],1),e("el-form-item",{attrs:{label:"年龄",prop:"age"}},[e("el-input",{attrs:{placeholder:"请输入您的年龄",clearable:""},model:{value:t.userInfo.age,callback:function(e){t.$set(t.userInfo,"age",t._n(e))},expression:"userInfo.age"}})],1),e("el-form-item",[e("el-button",{staticClass:"begin-experiment",attrs:{type:"primary"},on:{click:t.startExperiment}},[t._v("开始实验 ")])],1)],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:24}},[e("h3",{staticStyle:{color:"red"}},[t._v(" 请在屏幕1920x1080分辨率，100%缩放的环境下完成实验，实验过程中请勿缩放浏览器 ")])])],1)],1)],1)],1)},r=[],i=(n(7658),n(8847)),o={name:"userPage",mixins:[i.jP],data(){return{userInfo:{sId:"",gender:"男",name:"",age:23}}},created(){this.$set(this.userInfo,"sId",this.getId())},methods:{startExperiment(){this.$store.dispatch("storeUserInfo",this.userInfo),this.$router.push({name:"mainPage"})}}},l=o,s=n(1001),c=(0,s.Z)(l,a,r,!1,null,"51ecba27",null),u=c.exports},7311:function(t,e,n){var a=n(2140),r=n.n(a),i=n(7881),o=n.n(i),l=n(153),s=n.n(l),c=n(3892),u=n.n(c),d=n(934),p=n.n(d),h=n(9358),f=n.n(h),m=n(7650),g=n.n(m),y=n(6971),v=n.n(y),_=n(2804),b=n.n(_),C=n(714),S=n.n(C),I=n(8192),k=n.n(I),x=n(5981),G=n.n(x),O=n(9371),N=n.n(O),w=n(5583),D=n.n(w),A=n(5388),P=n.n(A),E=n(3729),T=n.n(E),j=n(1393),R=n.n(j),M=n(1407),B=n.n(M),$=n(1168),V=n.n($),Y=n(8319),z=n.n(Y),L=n(8037),U=n.n(L),Z=n(5464),F=n.n(Z),q=n(5493),H=n.n(q),J=n(1540),K=n.n(J),W=n(6369),Q=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},X=[],tt=n(8028),et={name:"App",components:{userPage:tt["default"]},beforeCreate(){this.$store.dispatch("loadSSIData")},created(){}},nt=et,at=n(1001),rt=(0,at.Z)(nt,Q,X,!1,null,null,null),it=rt.exports,ot=n(2631);const lt=()=>Promise.resolve().then(n.bind(n,8028)),st=()=>n.e(965).then(n.bind(n,9965));W["default"].use(ot.ZP);var ct=new ot.ZP({routes:[{path:"/",redirect:"/user"},{name:"user",path:"/user",component:lt},{name:"mainPage",path:"/main-page",component:st}]}),ut=n(3822),dt=n(4161);const pt=dt.Z.create({baseURL:"https://leisir-note-image.oss-cn-hangzhou.aliyuncs.com/",timeout:5e3,withCredentials:!1,headers:{"Cache-Control":"no-cache","Content-type":"application/json","Access-Control-Allow-Origin":"*"}});pt.interceptors.request.use((t=>t),(t=>Promise.reject(t))),pt.interceptors.response.use((t=>t.data),(t=>Promise.reject(t)));var ht=pt;async function ft(t){let e="distrubution.json";return t&&(e="distrubution_practice.json"),await ht({url:`/glyph_experiment_new/${e}`,method:"get"})}async function mt(t){let e="small_differ.json";return t&&(e="small_differ_practice.json"),await ht({url:`/glyph_experiment_new/${e}`,method:"get"})}async function gt(t){let e="acc_differ.json";return t&&(e="acc_differ_practice.json"),await ht({url:`/glyph_experiment_new/${e}`,method:"get"})}W["default"].use(ut.ZP);const yt={storeUserInfo(t,e){const n={...e};t.commit("StoreUserInfo",n)},loadSSIData(t){let e=[[ft(!0),ft(!1)],[mt(!0),mt(!1)],[gt(!0),gt(!1)]],n={};Promise.all(e[0]).then((t=>(n["DistributionPractice"]=t[0],n["Distribution"]=t[1],Promise.all(e[1]))),(t=>{console.log(`分布数据请求失败${t.message}`)})).then((t=>(n["SmallDifferPractice"]=t[0],n["SmallDiffer"]=t[1],Promise.all(e[2]))),(t=>{console.log(`微小差异数据请求失败${t.message}`)})).then((t=>{n["AccuracyDifferPractice"]=t[0],n["AccuracyDiffer"]=t[1]}),(t=>{console.log(`差值实验数据请求失败${t.message}`)})).finally((()=>{t.commit("LoadSSIData",n)}))}},vt={StoreUserInfo(t,e){t.userInfo=e},LoadSSIData(t,e){Object.assign(t,e),console.log(t)}},_t={userInfo:{},ssiColorEncoding:[{id:0,name:"food",color:"#e41a1c",nameCh:"Sufficient Food"},{id:1,name:"water",color:"#377eb8",nameCh:"Sufficient Drinking Water"},{id:2,name:"safe",color:"#bf66eb",nameCh:"Safe Sanitation"},{id:3,name:"education",color:"#4daf4a",nameCh:"Education"},{id:4,name:"life",color:"#984ea3",nameCh:"Healthy Life"},{id:5,name:"gender",color:"#ff7f00",nameCh:"Gender Equality"},{id:6,name:"income",color:"#fdbf6f",nameCh:"Income Distribution"},{id:7,name:"population",color:"#a65628",nameCh:"Population Growth"},{id:8,name:"governance",color:"#f781bf",nameCh:"Good Governance"}],ssiColorEncodingDemo:[{id:0,name:"food",color:"#e41a1c",nameCh:"营养不良指数"},{id:1,name:"water",color:"#377eb8",nameCh:"基础供水服务指数"},{id:2,name:"safe",color:"#bf66eb",nameCh:"基础卫生服务指数"},{id:3,name:"education",color:"#4daf4a",nameCh:"教育指数"},{id:4,name:"life",color:"#984ea3",nameCh:"健康生活指数"},{id:5,name:"gender",color:"#ff7f00",nameCh:"性别平等指数"},{id:6,name:"income",color:"#fdbf6f",nameCh:"收入分配指数"},{id:7,name:"population",color:"#a65628",nameCh:"人口增长指数"},{id:8,name:"governance",color:"#f781bf",nameCh:"政府治理水平指数"},{id:9,name:"health",color:"#63daac",nameCh:"健康"},{id:10,name:"biodiversity",color:"#e9baa5",nameCh:"生态"},{id:11,name:"renewable",color:"#a50f15",nameCh:"清洁能源"},{id:12,name:"GDP",color:"#a8f9a0",nameCh:"生产总值"},{id:13,name:"savings",color:"#a6cee3",nameCh:"节约"},{id:14,name:"greenhouse",color:"#8c96c6",nameCh:"绿色房屋"}],GlyphDesignData:{index:"39f41a8d-b7e6-11ed-9002-c403a826ff34",originIndex:"39eeeac7-b7e6-11ed-a078-c403a826ff34",city:"Austria",average:7.233509167974615,var:.7078247404108701,std:.8413232080543541,data:[{name:"food",value:7.911105549650376},{name:"water",value:7.87415577490147},{name:"safe",value:7.829557502924567},{name:"education",value:7.722513530595052},{name:"life",value:7.517247857453378},{name:"gender",value:6.129385773669878},{name:"income",value:6.843201585267538},{name:"population",value:5.466017626675156},{name:"governance",value:7.808397310634129}]}},bt=new ut.ZP.Store({actions:yt,mutations:vt,state:_t});var Ct=bt;W["default"].config.productionTip=!1,W["default"].use(K()),W["default"].use(H()),W["default"].use(F()),W["default"].use(U()),W["default"].use(z()),W["default"].use(V()),W["default"].use(B()),W["default"].use(R()),W["default"].use(T()),W["default"].use(P()),W["default"].use(D()),W["default"].use(N()),W["default"].use(G()),W["default"].use(k()),W["default"].use(S()),W["default"].use(b()),W["default"].use(v()),W["default"].use(g()),W["default"].use(f()),W["default"].use(p()),W["default"].use(u()),new W["default"]({render:t=>t(it),router:ct,store:Ct,beforeCreate(){W["default"].prototype.$bus=this,W["default"].prototype.$notify=s(),W["default"].prototype.$confirm=o().confirm,W["default"].prototype.$message=r()}}).$mount("#app")},8847:function(t,e,n){n.d(e,{YG:function(){return u},jP:function(){return s},k6:function(){return d}});n(7658);var a=n(691),r=n(6537),i=n(5743),o=n.n(i),l=n(6154);const s={data(){return{storageName:"userInfo"}},methods:{getId(){return(0,a.x0)()},randomIndex(t){return Math.floor(Math.random()*t)},getCurrentTime(){let t=o()(),e="YYYY-MM-DD HH:mm:ss.SSS";return t.format(e)},curExperiment(t){return 1===t?"Distribution":2===t?"SmallDiffer":"AccuracyDiffer"},saveAsJson(t,e,n){const a=this.curExperiment(e);let r="noName";const i=this.$store.state.userInfo;if(i){r=i.name;const e={userInfo:i,[a]:t},o=i.sId;let s=new Blob([JSON.stringify(e)],{type:"application/json"}),c=o+"_"+a+"_"+r+".json";(0,l.saveAs)(s,c),n()}},getDataAttrNum(t,e){const n=t.data,a=n.filter((t=>t.name===e));return a[0].value}}},c={methods:{angle_radian(t){return t*Math.PI/180},cal_angle(t,e){return t/e},cal_arc(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t*e*n},radius_scale(t,e,n){const a=r.BYU().domain([0,e]).range([0,n/2]);return a(t)},randomAngle(t,e,n){return r.LGj(t+n/2,e-n/2)()},cal_total_strip(t,e,n,a,i){let o=[];const l=r.BYU().domain([0,1]).range([0,t.outer-t.inner]),s=(t.outer-t.inner-l(n)*(i-1))/i,c=this.cal_arc(t.end-t.start,t.outer),u=this.cal_arc(t.end-t.start,t.inner),d=u/c,p=Math.min(a,d),h=p*c;for(let r=0;r<i;r++){let a=t.inner+s/2+(s+l(n))*r,i=this.cal_angle(h,a),c=Math.floor((t.end-t.start)/(2*i)),u=t.end-t.start-c*i*2,d=2*i*e,p=2*i-d,f=t.start+u/2+d/2;u>=p&&(u-=p,c++,f=t.start+u/2);for(let t=0;t<c;t++){let e={layer:r,index:t,inner_r:a-s/2,outer_r:a+s/2,start:f+t*i*2,end:f+t*i*2+p};o.push(e)}}return o},candidateIsValid(t,e,n,a,r){for(let i=0;i<r.length;i++){const o=r[i],l=Math.abs(o.inner_r-a.inner_r)<t+n,s=o.start+o.radian/2,c=a.start+a.radian/2,u=Math.abs(s-c)<o.radian/2+a.radian/2+e;if(l&&u)return!1}return!0},generatePointsBasedOnPoissonDiskDistributions(t,e,n,a,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:30;const l=r.BYU().domain([0,1]).range([0,t.outer-t.inner]),s=l(e),c=s*a,u=[t.inner+s/2,t.outer-s/2],d=this.cal_arc(t.end-t.start,u[1]),p=this.cal_arc(t.end-t.start,u[0]),h=p/d,f=Math.min(i,h),m=f*d,g=r.LGj(u[0],u[1])(),y=this.cal_angle(m,g),v=this.randomAngle(t.start,t.end,y),_={index:0,inner_r:g-s/2,outer_r:g+s/2,start:v-y/2,end:v+y/2,radian:y},b=[_],C=[_];while(C.length>0){const e=Math.floor(Math.random()*C.length);C[e];let a=!1;for(let i=0;i<o;i++){let e=r.LGj(u[0],u[1])(),i=this.cal_angle(m,e),o=this.randomAngle(t.start,t.end,i),l=i*n,d={index:b.length,inner_r:e-s/2,outer_r:e+s/2,start:o-i/2,end:o+i/2,radian:i};if(this.candidateIsValid(s,l,c,d,b)){b.push(d),C.push(d),a=!0;break}}!1===a&&C.splice(e,1)}return b}}},u={data(){return{peaGlyphCondition:{glyphSize:600,outlineThickness:.7,outlineOffset:1,circleNum:10,outlineDis:.5,centerOffset:12,thickness:.5,circleValue:1},stripeGlyphCondition:{glyphSize:600,iRadius:2.5,maxRadius:10,sectorInterval:3,svgEdgeDis:.1,outlineThickness:.7,divisionColor:"black",divisionOpacity:1,bgOpacity:0,innerOpacity:1,stripe_L_R:.1,stripe_B_A:.02,stripeProportion:.072,layerNum:10,metaphorColor:"#C0C0C0",metaphorOpacity:.3,stripeNum:40,isEncodingInfo:!0,encodingInfoColor:"red",stripeOpacity:1,stripeValue:.25}}},mixins:[c],computed:{encodingColor(){if(this.experimentInfo.isExperimentB)return this.$store.state.ssiColorEncoding}},methods:{createSvgOutline(t,e,n,a){let r=1,i=n-r/2,o=n-r/2,l=t.append("g").attr("class",e+"_svg_outline");l.append("rect").attr("x",a[0]-i/2).attr("y",a[1]-o/2).attr("width",i).attr("height",o).attr("fill","transparent").attr("stroke","black").attr("stroke-width",r).attr("stroke-opacity",0);return l},createDivision(t,e,n,a){const r=e+"_glyph_division",i=t.append("g").attr("class",r).attr("transform",(function(){return"translate("+a[0]+","+a[1]+")"}));i.selectAll("line").data((t=>t.data)).join("line").attr("x1",0).attr("y1",-n.metaData.inner).attr("x2",0).attr("y2",-n.metaData.outer).attr("stroke",n.division_color).attr("stroke-width",n.divisionThickness).attr("stroke-opacity",n.division_opacity).attr("transform",(function(t,e){return"rotate("+(-n.a_sector/2+e*(n.a_sector+n.sector_interval))+")"}));return i},createBackground(t,e,n,a){const i=this;let o=e+"_glyph_bg";n.isEvent&&(o+="_event");const l=t.append("g").attr("class",e+"_glyph_bg").attr("transform",(function(){return"translate("+a[0]+","+a[1]+")"})),s=l.selectAll("path").data((t=>t.data)).join("path").attr("d",(function(t,e){let a=i.angle_radian(e*(n.aSector+n.sectorInterval)),o=r.Nb1().innerRadius(n.metaData.inner).outerRadius(n.metaData.outer).startAngle(n.metaData.start+a).endAngle(n.metaData.end+a);return o()})).attr("fill",(function(t){let e=n.encodingColor.filter(((e,n)=>e.name===t.name.split(" ").join("_")));return e[0].color})).attr("fill-opacity",n.bgOpacity);return n.isEvent?s:l},drawOutline(t,e,n,a){return t.append("g").attr("class",e+"_"+n.name).append("circle").attr("cx",a[0]).attr("cy",a[1]).attr("r",n.radius).attr("fill","white").attr("fill-opacity",0).attr("stroke",n.color).attr("stroke-width",n.thickness).attr("stroke-opacity",n.opacity)},createMetaphor(t,e,n,a){const i=t.append("g").attr("class",e+"_glyph_metaphor").attr("transform",(function(){return"translate("+a[0]+","+a[1]+")"})).selectAll("g").data((t=>t.data)).join("g").attr("class",(function(t){return"metaphor_"+e+"_"+t.name})).attr("transform",(function(t,e){return"rotate("+e*(n.aSector+n.sectorInterval)+")"}));i.selectAll("path").data(n.sectorTotalStripe).join("path").attr("d",(function(t){let e=r.Nb1().innerRadius(t.inner_r).outerRadius(t.outer_r).startAngle(t.start).endAngle(t.end);return e()})).attr("fill",(function(){return n.metaphorColor})).attr("fill-opacity",n.metaphorOpacity);return i},createContent(t,e,n,a){const i=t.append("g").attr("class",e+"_glyph_content").attr("transform",(function(){return"translate("+a[0]+","+a[1]+")"})).selectAll("g").data((t=>t.data)).join("g").attr("class",(function(t){return"content_"+e+"_"+t.name})).attr("transform",(function(t,e){return"rotate("+e*(n.aSector+n.sectorInterval)+")"}));i.selectAll("path").data((function(t){let e=1;e=n.experimentInfo.isExperimentB?n.circleValue:t[this.getValueBaseStripeNum(n.stripeNum)];let a=Math.ceil(t.value/e);return n.sectorTotalStripe.slice(0,a)})).join("path").attr("d",(function(t,e){const a=r.Ys(this.parentNode).data()[0];let i=1;i=n.experimentInfo.isExperimentB?n.circleValue:a[this.getValueBaseStripeNum(n.stripeNum)];const o=Math.floor(a.value/i),l=r.Nb1().innerRadius(t.inner_r).outerRadius(t.outer_r).startAngle(t.start);if(e===o){let e=a.value-o*i,n=r.BYU().domain([0,i]).range([t.start,t.end]);l.endAngle(n(e))}else l.endAngle(t.end);return l()})).attr("fill",(function(){let t=r.Ys(this.parentNode).data()[0],e=n.color.filter(((e,n)=>e.name===t.name));return n.isEncodingInfo?e[0].color:n.encodingInfoColor})).attr("fill-opacity",n.stripeOpacity);return i},getValueBaseStripeNum(t){let e="value_";switch(t){case 10:e+=10;break;case 20:e+=20;break;case 30:e+=30;break;case 40:e+=40;break}return e},drawPeaGlyph(t,e,n,i,o,l){const s=this,c=[e.glyphSize/2,e.glyphSize/2],u="peaGlyph-"+(0,a.x0)();let d=[];d=i.isExperimentB?[70,50]:[60,30];const p=(e.glyphSize/2-e.outlineOffset-e.outlineDis-e.centerOffset)/(2*(e.circleNum+1))-e.thickness/2;let h=t.append("g").attr("class",u).datum(n),f=h.append("g").attr("class",u+"_peasecod"),m=f.append("g").attr("class",u+"_right").datum((t=>t)),g=f.append("g").attr("class",u+"_left").datum((t=>t)),y=(g.selectAll("path").data((t=>t.data)).join("path").attr("d",(()=>{let t=d[0],n=r.ETc(),a=180-t/2,i=a+t,o=e.glyphSize/4/Math.sin(s.angle_radian(t/2)),l=c[0]+Math.cos(s.angle_radian(t/2))*o,u=c[1]-e.glyphSize/4;return n.arc(l,u,o,s.angle_radian(a),s.angle_radian(i),!1),n})).attr("fill","#25a924").attr("fill-opacity",.2).attr("transform",(function(t,e){let n=r.Ys(this.parentNode).data()[0],a=n.data.length,i=360/a*e;return"rotate("+i+","+c[0]+","+c[1]+")"})),m.selectAll("path").data((t=>t.data)).join("path").attr("d",(function(t,n){let a=d[1],i=r.ETc(),o=0-a/2,l=o+a,u=e.glyphSize/4/Math.sin(s.angle_radian(a/2)),p=c[0]-Math.cos(s.angle_radian(a/2))*u,h=c[1]-e.glyphSize/4;return i.arc(p,h,u,s.angle_radian(o),s.angle_radian(l),!1),i})).attr("fill","#25a924").attr("fill-opacity",.2).attr("transform",(function(t,e){let n=r.Ys(this.parentNode).data()[0],a=n.data.length,i=360/a*e;return"rotate("+i+","+c[0]+","+c[1]+")"})),h.append("g").attr("class",u+"outline").append("circle").attr("cx",c[0]).attr("cy",c[1]).attr("r",e.glyphSize/2-e.outlineOffset).attr("fill","red").attr("fill-opacity",0).attr("stroke","black").attr("stroke-opacity",.7).attr("stroke-width",e.outlineThickness),h.append("g").attr("class",u+"_glyph_content")),v=y.selectAll("g").data((function(t){return t.data})).join("g").attr("class",(function(t,e){return u+t.name})).attr("transform",(function(t,e){let n=r.Ys(this.parentNode).data()[0],a=n.data.length,i=360/a;return"translate("+c[0]+","+c[1]+") rotate("+i*e+")"})),_=v.selectAll("g").data((function(t){let n=0,a=[];if(i.isExperimentB)n=e.circleValue;else{let a=s.getValueBaseStripeNum(e.circleNum);n=t[a]}if(t.value>=0)if(t.value>=n){let r=Math.floor(t.value/n),i=t.value-r*n;for(let t=0;t<e.circleNum;t++)t<r?a.push(n):t===r?a.push(i):a.push(0)}else{a.push(t.value);for(let t=1;t<e.circleNum;t++)a.push(0)}else for(let r=0;r<e.circleNum;r++)a.push(-1);return a})).join("g");_.append("circle").attr("cx",0).attr("cy",(function(t,n){let a=2*(p+e.thickness/2);return 0-a-e.centerOffset-a*n})).attr("r",p).attr("fill",(function(t){let e=r.Ys(this.parentNode.parentNode).data()[0].name,n=o.filter(((t,n)=>t.name===e));return n[0].color})).attr("stroke","black").attr("stroke-width",e.thickness).style("display",(function(t){return t<0?"none":"inline"})),_.append("defs").append("clipPath").attr("id",(function(t,e){let n=r.Ys(this.parentNode.parentNode.parentNode.parentNode).data()[0].index,i=r.Ys(this.parentNode.parentNode.parentNode).data()[0].name;return i+"_"+n+"_"+e+"_"+(0,a.x0)()})).append("rect").attr("x",-p+e.thickness/2).attr("y",(function(t,n){let a=2*(p+e.thickness/2);return 0-a-e.centerOffset-a*n-p+e.thickness/2})).attr("width",2*p-e.thickness).attr("height",(function(t){let n=0;if(i.isExperimentB)n=e.circleValue;else{let t=r.Ys(this.parentNode.parentNode.parentNode.parentNode).data()[0];n=t[s.getValueBaseStripeNum(e.circleNum)]}let a=2*p-e.thickness,o=r.BYU().domain([0,n]).range([a,0]);return t<0?0:o(t)})),_.append("circle").attr("cx",0).attr("cy",(function(t,n){let a=2*(p+e.thickness/2);return 0-a-e.centerOffset-a*n})).attr("r",p-e.thickness/2).attr("fill","white").attr("fill-opacity",1).attr("clip-path",(function(t,e){let n=r.Ys(this.previousSibling).select("clipPath").attr("id");return"url(#"+n+")"}));return h},drawStripGlyph(t,e,n,r,i,o){const l=this,s=[e.glyphSize/2,e.glyphSize/2],c="stripeGlyph-"+(0,a.x0)(),u=t.append("g").attr("class",c).datum(n),d=l.radius_scale(e.iRadius,e.maxRadius,e.glyphSize),p=360/n.data.length-e.sectorInterval,h=l.radius_scale(e.maxRadius-e.svgEdgeDis,e.maxRadius,e.glyphSize),f={inner:d+e.outlineThickness/2,outer:h-e.outlineThickness/2,start:l.angle_radian(e.sectorInterval/2-p/2),end:l.angle_radian(e.sectorInterval/2-p/2+p)},m=l.cal_total_strip(f,e.stripe_L_R,e.stripe_B_A,e.stripeProportion,e.layerNum);l.createDivision(u,c,{metaData:f,division_color:e.divisionColor,division_opacity:e.divisionOpacity,a_sector:p,sector_interval:e.sectorInterval,divisionThickness:e.outlineThickness},s),l.createBackground(u,c,{metaData:f,encodingColor:i,bgOpacity:e.bgOpacity,aSector:p,sectorInterval:e.sectorInterval,isEvent:!1},s),l.drawOutline(u,c,{name:"inner",radius:d,color:e.divisionColor,thickness:e.outlineThickness,opacity:e.innerOpacity},s),l.drawOutline(u,c,{name:"outer",radius:h,color:e.divisionColor,thickness:e.outlineThickness,opacity:e.innerOpacity},s),l.createMetaphor(u,c,{aSector:p,sectorInterval:e.sectorInterval,sectorTotalStripe:m,metaphorColor:e.metaphorColor,metaphorOpacity:e.metaphorOpacity},s),l.createContent(u,c,{aSector:p,sectorInterval:e.sectorInterval,stripeNum:e.stripeNum,sectorTotalStripe:m,color:i,isEncodingInfo:e.isEncodingInfo,encodingInfoColor:e.encodingInfoColor,stripeOpacity:e.stripeOpacity,experimentInfo:r,circleValue:e.stripeValue},s);return u}}},d={mixins:[c],data(){return{maxValue:10,publicGlyphCondition:{glyphSize:900,iRadius:2.5,maxRadius:10,sectorInterval:1.5,svgEdgeDis:.1,outlineThickness:.7,divisionColor:"black",divisionOpacity:1,bgOpacity:0,innerOpacity:1,stripeProportion:.083,stripe_L_R:.15,stripe_B_A:.07,metaphorColor:"#C0C0C0",metaphorOpacity:.3,isEncodingInfo:!0,encodingInfoColor:"red",stripeOpacity:1,attrNum:9},fixedGlyphCondition:{layerNum:6},randomGlyphCondition:{stripeThickness:.07,stripeNum:20},totalGlyphData:{index:"39f41a8d-b7e6-11ed-9002-c403a826ff34",originIndex:"39eeeac7-b7e6-11ed-a078-c403a826ff34",city:"Austria",average:7.233509167974615,var:.7078247404108701,std:.8413232080543541,data:[{name:"food",value:10},{name:"water",value:7.87415577490147},{name:"safe",value:5.829557502924567},{name:"education",value:9.722513530595052},{name:"life",value:3.517247857453378},{name:"gender",value:6.129385773669878},{name:"income",value:6.843201585267538},{name:"population",value:5.466017626675156},{name:"governance",value:7.808397310634129},{name:"health",value:6.808397310634129},{name:"biodiversity",value:5.2037809423789705},{name:"renewable",value:3.5905700302124055},{name:"GDP",value:8.618014862326365},{name:"savings",value:9.147414553503802},{name:"greenhouse",value:4.618014862326365}]},glyphSvg:"",allStripes:[]}},methods:{createSvg(){const t=this;this.glyphSvg&&this.glyphSvg.remove(),this.glyphSvg=r.Ys(`#${t.svgId}`).append("svg").attr("width",t.publicGlyphCondition.glyphSize).attr("height",t.publicGlyphCondition.glyphSize)},drawOutline(t,e,n,a){return t.append("g").attr("class",e+"_"+n.name).append("circle").attr("cx",a[0]).attr("cy",a[1]).attr("r",n.radius).attr("fill","white").attr("fill-opacity",0).attr("stroke",n.color).attr("stroke-width",n.thickness).attr("stroke-opacity",n.opacity)},createDivision(t,e,n,a){const r=e+"_glyph_division",i=t.append("g").attr("class",r).attr("transform",(function(){return"translate("+a[0]+","+a[1]+")"}));i.selectAll("line").data((t=>t.data)).join("line").attr("x1",0).attr("y1",-n.metaData.inner).attr("x2",0).attr("y2",-n.metaData.outer).attr("stroke",n.division_color).attr("stroke-width",n.divisionThickness).attr("stroke-opacity",n.division_opacity).attr("transform",(function(t,e){return"rotate("+(-n.a_sector/2+e*(n.a_sector+n.sector_interval))+")"}));return i},createBackground(t,e,n,a){const i=this,o=e+"_glyph_bg",l=t.append("g").attr("class",o).attr("transform",(function(){return"translate("+a[0]+","+a[1]+")"}));l.selectAll("path").data((t=>t.data)).join("path").attr("d",(function(t,e){const a=i.angle_radian(e*(n.aSector+n.sectorInterval)),o=r.Nb1().innerRadius(n.metaData.inner).outerRadius(n.metaData.outer).startAngle(n.metaData.start+a).endAngle(n.metaData.end+a);return o()})).attr("fill",(function(t){const e=n.encodingColor.filter(((e,n)=>e.name===t.name));return e[0].color})).attr("fill-opacity",n.bgOpacity);return l},createMetaphor(t,e,n,a){const i=t.append("g").attr("class",e+"_glyph_metaphor").attr("transform",(function(){return"translate("+a[0]+","+a[1]+")"})).selectAll("g").data((t=>t.data)).join("g").attr("class",(function(t){return"metaphor_"+e+"_"+t.name})).attr("transform",(function(t,e){return"rotate("+e*(n.aSector+n.sectorInterval)+")"}));i.selectAll("path").data(n.sectorTotalStripe).join("path").attr("d",(function(t){let e=r.Nb1().innerRadius(t.inner_r).outerRadius(t.outer_r).startAngle(t.start).endAngle(t.end);return e()})).attr("fill",(function(){return n.metaphorColor})).attr("fill-opacity",n.metaphorOpacity);return i},createContent(t,e,n,a){const i=t.append("g").attr("class",e+"_glyph_content").attr("transform",(function(){return"translate("+a[0]+","+a[1]+")"})).selectAll("g").data((t=>t.data)).join("g").attr("class",(function(t){return"content_"+e+"_"+t.name})).attr("transform",(function(t,e){return"rotate("+e*(n.aSector+n.sectorInterval)+")"}));i.selectAll("path").data((function(t){const e=n.circleValue,a=Math.ceil(t.value/e);return n.sectorTotalStripe.slice(0,a)})).join("path").attr("d",(function(t,e){const a=r.Ys(this.parentNode).data()[0],i=n.circleValue,o=Math.floor(a.value/i),l=r.Nb1().innerRadius(t.inner_r).outerRadius(t.outer_r).startAngle(t.start);if(e===o){let e=a.value-o*i,n=r.BYU().domain([0,i]).range([t.start,t.end]);l.endAngle(n(e))}else l.endAngle(t.end);return l()})).attr("fill",(function(){let t=r.Ys(this.parentNode).data()[0],e=n.color.filter(((e,n)=>e.name===t.name));return n.isEncodingInfo?e[0].color:n.encodingInfoColor})).attr("fill-opacity",n.stripeOpacity);return i},createRandomContent(t,e,n,a){const i=t.append("g").attr("class",`${e}_glyph_content`).attr("transform",(function(){return`translate(${a[0]},${a[1]})`})).selectAll("g").data((t=>t.data)).join("g").attr("class",(function(t){return`content_${e}_${t.name}`})).attr("transform",(function(t,e){return"rotate("+e*(n.aSector+n.sectorInterval)+")"}));i.selectAll("path").data((t=>{const e=n.circleValue,a=Math.ceil(t.value/e);let r=n.sectorTotalStripe.slice(0,a);return 0!==t.value&&t.value%e!==0&&(r=[r[0],...r]),r})).join("path").attr("d",(function(t,e){const a=r.Ys(this.parentNode).data()[0],i=n.circleValue,o=Math.floor(a.value/i),l=r.Nb1().innerRadius(t.inner_r).outerRadius(t.outer_r).startAngle(t.start);if(1===e){const e=a.value-o*i,n=r.BYU().domain([0,i]).range([t.start,t.end]);l.endAngle(n(e))}else l.endAngle(t.end);return l()})).attr("fill",(function(t,e){const a=r.Ys(this.parentNode).data()[0],i=a.value,o=Math.floor(i/n.circleValue),l=n.color.filter(((t,e)=>t.name===a.name));return o*n.circleValue<i&&0===e?n.metaphorColor:n.isEncodingInfo?l[0].color:n.encodingInfoColor})).attr("fill-opacity",(function(t,e){const a=r.Ys(this.parentNode).data()[0],i=a.value,o=Math.floor(i/n.circleValue);return o*n.circleValue<i&&0===e?n.metaphorOpacity:n.stripeOpacity})).attr("class",(function(t,e){const a=r.Ys(this.parentNode).data()[0],i=a.value,o=Math.floor(i/n.circleValue);return o*n.circleValue<i&&0===e?"path_metaphor":""}));return i},createPublicComponent(t,e){const n=this;n.drawOutline(t,e,{name:"inner",radius:n.innerRadius,color:n.publicGlyphCondition.divisionColor,thickness:n.publicGlyphCondition.outlineThickness,opacity:n.publicGlyphCondition.innerOpacity},n.glyphPosition),n.drawOutline(t,e,{name:"outer",radius:n.outerRadius,color:n.publicGlyphCondition.divisionColor,thickness:n.publicGlyphCondition.outlineThickness,opacity:n.publicGlyphCondition.innerOpacity},n.glyphPosition),n.createDivision(t,e,{metaData:n.metaData,division_color:n.publicGlyphCondition.divisionColor,division_opacity:n.publicGlyphCondition.divisionOpacity,a_sector:n.aSector,sector_interval:n.publicGlyphCondition.sectorInterval,divisionThickness:n.publicGlyphCondition.outlineThickness},n.glyphPosition),n.createBackground(t,e,{metaData:n.metaData,encodingColor:n.colorEncoding,bgOpacity:n.publicGlyphCondition.bgOpacity,aSector:n.aSector,sectorInterval:n.publicGlyphCondition.sectorInterval},n.glyphPosition)},createFixedGlyph(){const t=this,e=`fixed-${(0,a.x0)()}`,n=this.glyphSvg.append("g").attr("class",e).datum(t.glyphData);this.createPublicComponent(n,e),this.createMetaphor(n,e,{aSector:t.aSector,sectorInterval:t.publicGlyphCondition.sectorInterval,sectorTotalStripe:t.fixedSectorTotalStripe,metaphorColor:t.publicGlyphCondition.metaphorColor,metaphorOpacity:t.publicGlyphCondition.metaphorOpacity},t.glyphPosition),this.createContent(n,e,{aSector:t.aSector,sectorInterval:t.publicGlyphCondition.sectorInterval,sectorTotalStripe:t.fixedSectorTotalStripe,color:t.colorEncoding,isEncodingInfo:t.publicGlyphCondition.isEncodingInfo,encodingInfoColor:t.publicGlyphCondition.encodingInfoColor,stripeOpacity:t.publicGlyphCondition.stripeOpacity,circleValue:t.stripeValue},t.glyphPosition)},createRandomGlyph(){const t=this,e=`random-${(0,a.x0)()}`,n=this.glyphSvg.append("g").attr("class",e).datum(t.glyphData);this.createPublicComponent(n,e),this.createRandomContent(n,e,{aSector:t.aSector,sectorInterval:t.publicGlyphCondition.sectorInterval,sectorTotalStripe:t.randomSectorTotalStripe,color:t.colorEncoding,metaphorColor:t.publicGlyphCondition.metaphorColor,metaphorOpacity:t.publicGlyphCondition.metaphorOpacity,isEncodingInfo:t.publicGlyphCondition.isEncodingInfo,encodingInfoColor:t.publicGlyphCondition.encodingInfoColor,stripeOpacity:t.publicGlyphCondition.stripeOpacity,circleValue:t.stripeValue},t.glyphPosition)}},computed:{svgId(){const t=1===this.layoutStrategies?"fixed":"random";return`${t}_${(0,a.x0)()}`},glyphPosition(){return[this.publicGlyphCondition.glyphSize/2,this.publicGlyphCondition.glyphSize/2]},aSector(){return 360/this.glyphData.data.length-this.publicGlyphCondition.sectorInterval},innerRadius(){return this.radius_scale(this.publicGlyphCondition.iRadius,this.publicGlyphCondition.maxRadius,this.publicGlyphCondition.glyphSize)},outerRadius(){return this.radius_scale(this.publicGlyphCondition.maxRadius-this.publicGlyphCondition.svgEdgeDis,this.publicGlyphCondition.maxRadius,this.publicGlyphCondition.glyphSize)},metaData(){return{inner:this.innerRadius+this.publicGlyphCondition.outlineThickness/2,outer:this.outerRadius-this.publicGlyphCondition.outlineThickness/2,start:this.angle_radian(this.publicGlyphCondition.sectorInterval/2-this.aSector/2),end:this.angle_radian(this.publicGlyphCondition.sectorInterval/2-this.aSector/2+this.aSector)}},fixedSectorTotalStripe(){return this.cal_total_strip(this.metaData,this.publicGlyphCondition.stripe_L_R,this.publicGlyphCondition.stripe_B_A,this.publicGlyphCondition.stripeProportion,this.fixedGlyphCondition.layerNum)},randomSectorTotalStripe(){this.allStripes=this.generatePointsBasedOnPoissonDiskDistributions(this.metaData,this.randomGlyphCondition.stripeThickness,this.publicGlyphCondition.stripe_L_R,this.publicGlyphCondition.stripe_B_A,this.publicGlyphCondition.stripeProportion);const t=[...this.allStripes];return t.length>=this.randomGlyphCondition.stripeNum?t.slice(0,this.randomGlyphCondition.stripeNum):t},stripeValue(){return 1===this.layoutStrategies?this.maxValue/this.fixedSectorTotalStripe.length:this.maxValue/this.randomSectorTotalStripe.length},colorEncoding(){const t=this.$store.state.ssiColorEncodingDemo,e=Math.min(this.publicGlyphCondition.attrNum,t.length);return[...t.slice(0,e)]},glyphData(){const t=this.totalGlyphData.data,e=Math.min(this.publicGlyphCondition.attrNum,t.length);return{...this.totalGlyphData,data:[...t.slice(0,e)]}}},watch:{allStripes:{deep:!0,handler(t,e){this.$bus.$emit("updateStripeNum",t)}}}}}},e={};function n(a){var r=e[a];if(void 0!==r)return r.exports;var i=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=t,function(){n.amdO={}}(),function(){var t=[];n.O=function(e,a,r,i){if(!a){var o=1/0;for(u=0;u<t.length;u++){a=t[u][0],r=t[u][1],i=t[u][2];for(var l=!0,s=0;s<a.length;s++)(!1&i||o>=i)&&Object.keys(n.O).every((function(t){return n.O[t](a[s])}))?a.splice(s--,1):(l=!1,i<o&&(o=i));if(l){t.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[a,r,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,a){return n.f[a](t,e),e}),[]))}}(),function(){n.u=function(t){return"js/"+t+".8ffdaa70.js"}}(),function(){n.miniCssF=function(t){return"css/"+t+".0626cd1e.css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="glyph_experiment_new:";n.l=function(a,r,i,o){if(t[a])t[a].push(r);else{var l,s;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==e+i){l=d;break}}l||(s=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",e+i),l.src=a),t[a]=[r];var p=function(e,n){l.onerror=l.onload=null,clearTimeout(h);var r=t[a];if(delete t[a],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach((function(t){return t(n)})),e)return e(n)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),s&&document.head.appendChild(l)}}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){n.p="/glyph_experiment_new/"}(),function(){if("undefined"!==typeof document){var t=function(t,e,n,a,r){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var o=function(n){if(i.onerror=i.onload=null,"load"===n.type)a();else{var o=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.href||e,s=new Error("Loading CSS chunk "+t+" failed.\n("+l+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=o,s.request=l,i.parentNode.removeChild(i),r(s)}};return i.onerror=i.onload=o,i.href=e,n?n.parentNode.insertBefore(i,n.nextSibling):document.head.appendChild(i),i},e=function(t,e){for(var n=document.getElementsByTagName("link"),a=0;a<n.length;a++){var r=n[a],i=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(i===t||i===e))return r}var o=document.getElementsByTagName("style");for(a=0;a<o.length;a++){r=o[a],i=r.getAttribute("data-href");if(i===t||i===e)return r}},a=function(a){return new Promise((function(r,i){var o=n.miniCssF(a),l=n.p+o;if(e(o,l))return r();t(a,l,null,r,i)}))},r={143:0};n.f.miniCss=function(t,e){var n={965:1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=a(t).then((function(){r[t]=0}),(function(e){throw delete r[t],e})))}}}(),function(){var t={143:0};n.f.j=function(e,a){var r=n.o(t,e)?t[e]:void 0;if(0!==r)if(r)a.push(r[2]);else{var i=new Promise((function(n,a){r=t[e]=[n,a]}));a.push(r[2]=i);var o=n.p+n.u(e),l=new Error,s=function(a){if(n.o(t,e)&&(r=t[e],0!==r&&(t[e]=void 0),r)){var i=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",l.name="ChunkLoadError",l.type=i,l.request=o,r[1](l)}};n.l(o,s,"chunk-"+e,e)}},n.O.j=function(e){return 0===t[e]};var e=function(e,a){var r,i,o=a[0],l=a[1],s=a[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(s)var u=s(n)}for(e&&e(a);c<o.length;c++)i=o[c],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(u)},a=self["webpackChunkglyph_experiment_new"]=self["webpackChunkglyph_experiment_new"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(7311)}));a=n.O(a)})();
//# sourceMappingURL=app.cb819d7f.js.map